---
title: 计算机网络知识点二
date: 2020-03-25
tag: 
- 计算机网络
description: 介绍TCP/IP模型，以及TCP协议与UDP协议的差别。
---



## 计算机网络知识点二

#### 传输控制协议TCP简介：

- 面向连接的、可靠的、基于字节流的传输层通信协议
- 全双工通信：建立TCP连接之后，双方都可以发送数据
- 数据首部字节需要20-60字节
- 将应用层的数据流分割成报文段并发送给目标节点的TCP层
- 数据包有序号，对方收到则发送ACK确认，未收到则重传
- 面向字节流，接收方可以按照顺序接受数据块，重组分块前的数据流
- 使用校验和来检验数据在传输过程中是否有误

#### TCP三次握手的流程图：



<img src="https://raw.githubusercontent.com/1583902733/images/master/blogs/3woshou.jpg" style="zoom: 67%;" />

#### **为什么要三次握手，两次不行吗？**

​		如果采用两次握手，那么只要服务器发出确认数据包就会建立连接，但由于客户端此时并未响应服务端的请求，那此时服务器端就会一直在等待客户端，这样服务器端就白白浪费了一定的资源。如果采用三次握手，服务端没有收到客户端的再次确认，就会知道客户端并没有要求建立请求，就不会浪费服务器的资源

#### TCP四次挥手的流程图：



<img src="https://raw.githubusercontent.com/1583902733/images/master/blogs/4huishou.jpg" style="zoom: 67%;" />



**注意**：在进行两次握手之后，服务端还是可以将数据传输给客户端。

#### TIME_WAIT状态？

​		确保有足够的时间让对方收到ACK包。如果服务端没有收到，到达等待时间会请求客户端重新发送，如果客户端在2MSL中没有收到消息，证明客户端已经收到了断开连接的确认信息，这时可以关闭客户端了。

#### 为什么需要四次挥手？

​		因为全双工，发送方和接收方都需要FIN和ACK报文才会断开连接。

基于`TCP`的应用层协议有`HTTP`、`SMTP`、`FTP`、`Telnet` 和 `POP3`。

#### 用户数据报协议UDP协议：

- 面向非连接
- 不维护连接状态，支持同时向多个客户端传输相同的消息
- 数据包报头只有8个字节，额外开销较小
- 吞吐量值受限于数据生成速率、传输速率以及机器性能
- 尽最大努力，不保证可靠交付，不需要维持复杂的连接状态表
- 无拥塞控制
- 面向报文：数据以数据报（包）的形式传输，不像TCP会拆分

基于UDP的应用层协议：DNS协议、DHCP协议、RIP（路由信息协议）等。另外，音频、视频、在线游戏流量通常使用UDP传输。 实时视频流和音频流应用程序旨在处理偶尔丢失、错误的数据包，因此只会发生质量轻微下降，而避免了重传数据包带来的高延迟。

#### TCP和UDP的区别：

|        | TCP                          | UDP        |
| ------ | ---------------------------- | ---------- |
| 连接   | 面向连接                     | 面向无连接 |
| 可靠性 | 可靠，无差错，不丢失，不重复 | 不保证可靠 |
| 速度   | 慢                           | 快         |
| 量级   | 重                           | 轻         |

#### 为什么说TCP提供数据流服务而UDP提供数据报服务呢？

​		TCP提供可靠的传输机制，也就是说只要是被发送的数据都会被接收方接收到，并且双方也知道被正确接收了，这就有一种现象：一段比较大的数据被分段传送出去，对于接收方而言，就像一股水流一样不断地并且一滴不漏的被接收（这个过程中有确认机制，更加形象地类似水流），非常类似于水流。而 UDP 不提供可靠的传输机制，它只知道尽最大的努力把数据发送出去，并不关心数据是否被接收方实际接收，对于接收方而言，他接收数据的情形是：来一个我接受一个，并不关心中间是否有丢失的数据报。从传输层理解的话就是每个udp报文独立存在，他们的联系是发生在他的高层应用层。再结合到数据的发送和接收上，对于接收端而言并无顺序可言，数据报之间没有约定的连接格式，每个udp数据报之间就像独立的个体一样。



#### 参考：

1.https://www.cnblogs.com/sgh1023/p/10507526.html

2.https://www.jianshu.com/p/65605622234b

3.https://blog.csdn.net/dreamwbt/article/details/54097987

